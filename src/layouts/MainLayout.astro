---
import { Command } from '@/components/common/Command'
import { MainNavigationMenu } from '@/components/common/MainNavigationMenu'
import Footer from '@/components/layout/Footer.astro'
import Header from '@/components/layout/Header.astro'
import { SheetMobileNav } from '@/components/mobile/sheet-mobile-nav'

import { ThemeToggle } from '@/components/util/theme-toggle'
import { navMenuConfig } from '@/config/nav-menu'
import { siteConfig } from '@/config/site'
import { cn, extractSegmentURL } from '@/lib/utils'
import { Icon } from 'astro-icon/components'
import BaseLayout from './BaseLayout.astro'
// import MainNav from "@/components/layout/main-nav.astro";

type Props = {
  title: string
  description?: string
  mainClass?: string
}

const { title, description, mainClass } = Astro.props
const segment = extractSegmentURL(Astro.url.pathname)
---

<BaseLayout title={title} description={description}>
  <Header className="border-b">
    <MainNavigationMenu slot="left-header" segment={segment} client:load />
    <SheetMobileNav
      mainNavItems={[...navMenuConfig.links]}
      sidebarNavItems={[
        ...navMenuConfig.pagesNav,
      ]}
      slot="mobile-nav-header"
      client:load
    />

    <div class="flex items-center gap-x-4" slot="right-header">
      <Command client:load />
      <a
        href={siteConfig.links.github}
        target="_blank"
        rel="noreferrer"
        aria-label="github"
      >
        <Icon name="github" class="size-5" />
      </a>
      <ThemeToggle client:load />
    </div>
  </Header>

  <main class={cn(mainClass)}>
    <slot />
  </main>
  <Footer />
</BaseLayout>
